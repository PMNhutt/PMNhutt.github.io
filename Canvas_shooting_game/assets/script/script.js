const canvas=document.querySelector("canvas"),c=canvas.getContext("2d");canvas.width=innerWidth,canvas.height=innerHeight;const score=document.querySelector("#score"),startGame=document.querySelector("#startGame"),modelG=document.querySelector("#model"),endScore=document.querySelector("#endScore"),endTime=document.querySelector("#endTime"),modelElement=document.querySelector("#model_2"),modelPause=document.querySelector("#model_pause"),pauseScore=document.querySelector("#pauseScore"),continueGame=document.querySelector("#continueGame"),restartGame=document.querySelector("#restart"),pause=document.querySelector("#pause"),pauseBackground=document.querySelector("#pause_background"),scoreCorner=document.querySelector("#score_corner"),startBackground=document.querySelector("#start_background"),startText=document.querySelector("#startText"),timer=document.querySelector("#timer"),timerCorner=document.querySelector("#timer_corner"),howToPlay=document.querySelector("#how"),howText=document.querySelector("#howText"),about=document.querySelector("#about"),aboutText=document.querySelector("#aboutText"),modelMess=document.querySelector("#model_mess"),changeMess=document.querySelector("#message1"),changeMess2=document.querySelector("#message2"),endGameBackground=document.querySelector("#endGameBg"),gameOver=document.querySelector("#endText"),highScoreBoard=document.querySelector(".highScore"),highScoreDisplay=document.querySelector("#highScore"),exit=document.querySelector("#exit"),exitText=document.querySelector("#exitText"),Bg_music=document.querySelector("#background_music"),pyroColor="hsl(0, 60%, 50%)",hydroColor="hsl(220, 60%, 50%)",anemoColor="hsl(170, 60%, 50%)",electroColor="hsl(290, 60%, 50%)",dendroColor="hsl(90, 60%, 50%)",cryoColor="hsl(180, 60%, 50%)",geoColor="hsl(30, 60%, 50%)",bgGradient=c.createLinearGradient(0,0,0,canvas.height);bgGradient.addColorStop(0,"#171e26"),bgGradient.addColorStop(1,"#3f586b");const bgImage=new Image;bgImage.src="./assets/css/img/stars-black.png";const ground=new Image;ground.src="./assets/css/img/mid_ground_cloud_2.png";const ground_1=new Image;ground_1.src="./assets/css/img/mid_ground_cloud_1.png";const spaceShip=new Image;spaceShip.src="./assets/css/img/spaceShips_004.png";const enemyPyro1="./assets/css/img/Enemy_pyro_1.png",enemyHydro1="./assets/css/img/Enemy_hydro_1.png",enemyGeo1="./assets/css/img/Enemy_geo_1.png",enemyAnemo1="./assets/css/img/Enemy_anemo_1.png",enemyDendro1="./assets/css/img/Enemy_dendro_1.png",enemyCryo1="./assets/css/img/Enemy_cryo_1.png",enemyElectro1="./assets/css/img/Enemy_electro_1.png",enemyPyro2="./assets/css/img/Enemy_pryo_2.png",enemyHydro2="./assets/css/img/Enemy_hydro_2.png",enemyGeo2="./assets/css/img/Enemy_geo_2.png",enemyAnemo2="./assets/css/img/Enemy_anemo_2.2.png",enemyDendro2="./assets/css/img/Enemy_dendro_2.png",enemyCryo2="./assets/css/img/Enemy_cryo_2.2.png",enemyElectro2="./assets/css/img/Enemy_electro_2.png";class Player{constructor(e,t,o,s){this.x=e,this.y=t,this.radius=o,this.color=s,this.alpha=1}draw(){c.save(),c.beginPath(),c.globalAlpha=this.alpha,c.arc(this.x,this.y,this.radius,0,2*Math.PI,!1),c.shadowBlur=30,c.shadowColor=this.color,c.shadowOffsetX=0,c.shadowOffsetY=0,c.fillStyle=this.color,c.fill(),c.restore()}update(){this.draw(),this.alpha-=.01}}class Projectile{constructor(e,t,o,s,a){this.x=e,this.y=t,this.radius=o,this.color=s,this.velocity=a}draw(){c.save(),c.beginPath(),c.arc(this.x,this.y,this.radius,0,2*Math.PI,!1),c.fillStyle=this.color,c.shadowColor=this.color,c.shadowBlur=20,c.shadowOffsetX=0,c.shadowOffsetY=0,c.fill(),c.restore()}update(){this.draw(),this.x=this.x+this.velocity.x,this.y=this.y+this.velocity.y}}class Enemy{constructor(e,t,o,s,a,r){this.x=e,this.y=t,this.radius=o,this.color=s,this.velocity=a,this.img=r,this.angle=360*Math.random(),this.spin=Math.random()<.5?1:-1}draw(){c.save(),c.translate(this.x,this.y),c.rotate(this.angle*Math.PI/360*this.spin),c.drawImage(this.img,0-this.radius,0-this.radius,2*this.radius,2*this.radius),c.restore()}update(){this.angle+=.3,this.draw(),(this.x+this.radius>canvas.width||this.x-this.radius<=0)&&(this.velocity.x=-this.velocity.x),this.x=this.x+this.velocity.x,this.y=this.y+this.velocity.y}}class Enemy_2{constructor(e,t,o,s,a,r){this.x=e,this.y=t,this.radius=o,this.color_1=s,this.color_2=a,this.velocity=r,this.angle=360*Math.random(),this.spin=Math.random()<.5?1:-1}draw(){c.save(),c.beginPath(),c.arc(this.x,this.y,this.radius,0,2*Math.PI,!1),c.fillStyle=this.color_1,c.fill(),c.beginPath(),c.arc(this.x,this.y,this.radius,0,2*Math.PI,!1),c.fillStyle=this.color_2,c.fill(),c.restore()}update(){this.angle+=.3,this.draw(),(this.x+this.radius>canvas.width||this.x-this.radius<=0)&&(this.velocity.x=-this.velocity.x),this.x=this.x+this.velocity.x,this.y=this.y+this.velocity.y}}const friction=.99;class Particle{constructor(e,t,o,s,a){this.x=e,this.y=t,this.radius=o,this.color=s,this.velocity=a,this.alpha=1}draw(){c.save(),c.globalAlpha=this.alpha,c.beginPath(),c.arc(this.x,this.y,this.radius,0,2*Math.PI,!1),c.fillStyle=this.color,c.fill(),c.restore()}update(){this.draw(),this.velocity.x*=friction,this.velocity.y*=friction,this.x=this.x+this.velocity.x,this.y=this.y+this.velocity.y,this.alpha-=.01}}class Status{constructor(e,t,o,s,a){this.x=e,this.y=t,this.text=o,this.color=s,this.velocity=a,this.alpha=1}draw(){c.save(),c.globalAlpha=this.alpha,c.font="35px PASTI",c.strokeStyle="black",c.lineWidth=4,c.strokeText(this.text,this.x,this.y),c.fillStyle=this.color,c.fillText(this.text,this.x,this.y),c.restore()}update(){this.draw(),this.velocity.x*=friction,this.velocity.y*=friction,this.x=this.x+this.velocity.x,this.y=this.y+this.velocity.y,this.alpha-=.01}}const w=canvas.width/2,h=canvas.height/2+120;let player=new Player(w,h-5,15,"white"),bullet=[],enemies=[],enemies_2=[],particles=[],textStatus=[];var colorBullet;let timerInterval,spawnEnemiesInterval,spawnEnemiesInterval_2,animationId,totalSec=0,spd=0,state=0;function countTime(e){totalSec++;var t=Math.floor(totalSec/3600),o=Math.floor((totalSec-3600*t)/60),s=totalSec-(3600*t+60*o);return timer.innerHTML=pad(t)+":"+pad(o)+":"+pad(s),e}function pad(e){var t=e+"";return t.length<2?"0"+t:t}function init(){player=new Player(w,h-5,15,pyroColor),colorBullet=pyroColor,bullet=[],enemies=[],enemies_2=[],particles=[],scroreCount=0,totalSec=0,score.innerHTML=scroreCount,endScore.innerHTML=scroreCount,timer.innerHTML=totalSec,spd=0,state=0,checkState=!1,checkPause=!1}function spawnEnimies(){switch(!0){case scroreCount>=250&&scroreCount<400:state=spd=.25;break;case scroreCount>=400&&scroreCount<600:state=spd=.5;break;case scroreCount>=600&&scroreCount<1e3:state=spd=1;break;case scroreCount>=1e3:state=spd=1.5;break;default:switch(!0){case state>0:spd=state;break;case.5==state:spd=.5;break;case 1==state:spd=1;break;case 1.5==state:spd=1.5;break;default:spd=-.5}}if(spd<=.25)var e=30*Math.random()+30;else e=60;let t,o;t=Math.max(e,Math.random()*canvas.width-e),o=0;const s=1*Math.random()+1,a={x:Math.cos(s)*(1+spd),y:Math.sin(s)*(1+spd)};let r=[0,30,90,170,220,180,290],c=Math.floor(Math.random()*r.length);var n=`hsl(${r[c]}, 60%, 50%)`,l=new Image;switch(r[c]){case 0:l.src=Math.random()<.5?enemyPyro1:enemyPyro2;break;case 30:l.src=Math.random()<.5?enemyGeo1:enemyGeo2;break;case 90:l.src=Math.random()<.5?enemyDendro1:enemyDendro2;break;case 170:l.src=Math.random()<.5?enemyAnemo1:enemyAnemo2;break;case 220:l.src=Math.random()<.5?enemyHydro1:enemyHydro2;break;case 180:l.src=Math.random()<.5?enemyCryo1:enemyCryo2;break;case 290:l.src=Math.random()<.5?enemyElectro1:enemyElectro2}enemies.push(new Enemy(t,0,e,n,a,l))}function spawnEnimies_2(){let e=!0;let t,o;t=Math.max(50,Math.random()*canvas.width-50),o=0;const s=1*Math.random()+1,a={x:Math.cos(s)/2,y:Math.sin(s)/2};let r=[0,30,90,170,220,180,290],c=Math.floor(Math.random()*r.length);var n=`hsl(${r[c]}, 60%, 50%)`;let l=Math.floor(Math.random()*r.length);var i;l!=c?i=`hsl(${r[l]}, 60%, 50%)`:e=!1;var u=new Image;switch(r[c]){case 0:u.src=Math.random()<.5?enemyPyro1:enemyPyro2;break;case 30:u.src=Math.random()<.5?enemyGeo1:enemyGeo2;break;case 90:u.src=Math.random()<.5?enemyDendro1:enemyDendro2;break;case 170:u.src=Math.random()<.5?enemyAnemo1:enemyAnemo2;break;case 220:u.src=Math.random()<.5?enemyHydro1:enemyHydro2;break;case 180:u.src=Math.random()<.5?enemyCryo1:enemyCryo2;break;case 290:u.src=Math.random()<.5?enemyElectro1:enemyElectro2}1==e&&enemies_2.push(new Enemy_2(t,0,50,n,i,a))}let scroreCount=0,highScore=localStorage.getItem("game1stHighScore")||0;highScoreBoard.textContent="HIGH SCORE: "+highScore;let groundHeight=150,groundX=0,groundX2=canvas.width,groundX3=0,groundX4=canvas.width/2,groundX5=canvas.width,checkBonus=!1,checkEndGame=!1,checkPause=!1,checkState=!1;function animate(){animationId=requestAnimationFrame(animate),c.clearRect(0,0,canvas.width,canvas.height),c.drawImage(bgImage,0,0,canvas.width,canvas.height),c.drawImage(spaceShip,w-30,h-10,60,100),c.drawImage(ground_1,groundX3,canvas.height-200,canvas.width/2,200),c.drawImage(ground_1,groundX4,canvas.height-200,canvas.width/2,200),c.drawImage(ground_1,groundX5,canvas.height-200,canvas.width/2,200),c.drawImage(ground,groundX,canvas.height-groundHeight,canvas.width,groundHeight),c.drawImage(ground,groundX2,canvas.height-groundHeight,canvas.width,groundHeight),groundX<-canvas.width?groundX=canvas.width-2:groundX--,groundX3<-canvas.width/2?groundX3=canvas.width-2:groundX3-=.5,groundX2<-canvas.width?groundX2=canvas.width-2:groundX2--,groundX4<-canvas.width/2?groundX4=canvas.width-2:groundX4-=.5,groundX5<-canvas.width/2?groundX5=canvas.width-2:groundX5-=.5,player.update(),player.alpha<=.2&&(player.alpha=1),particles.forEach((e,t)=>{e.alpha<=0?particles.splice(t,1):e.update()}),textStatus.forEach((e,t)=>{e.alpha<=0?textStatus.splice(t,1):e.update()}),bullet.forEach((e,t)=>{e.update(),(e.x+e.radius<0||e.x-e.radius>canvas.width||e.y+e.radius<0||e.y-e.radius>canvas.height)&&setTimeout(function(){bullet.splice(t,1)},0)}),enemies.forEach((e,t)=>{e.update(),(Math.hypot(player.x-e.x,player.y-e.y)-e.radius-player.radius<1||e.y+e.radius>canvas.height-groundHeight)&&(clearInterval(spawnEnemiesInterval),cancelAnimationFrame(animationId),checkHighScore(),setTimeout(()=>{modelG.style.display="flex",modelG.style.background="#f8f9fa"},13e3),endGameBackground.style.display="block",endGameBackground.play(),endScore.innerHTML="Score: "+scroreCount,endTime.innerHTML="Time: "+timer.innerHTML,endTime.style.display="block",endScore.style.display="block",modelElement.style.display="none",pause.style.display="none",startText.innerHTML="Restart",pauseBackground.style.display="block",clearInterval(timerInterval),checkEndGame=!0,howToPlay.style.display="none",about.style.display="none",changeState=!1,checkPause=!0,gameOver.style.display="block",highScoreDisplay.style.display="block",highScoreDisplay.textContent=highScoreBoard.innerHTML,exit.style.display="block"),bullet.forEach((o,s)=>{if(Math.hypot(o.x-e.x,o.y-e.y)-e.radius-o.radius<1)if(o.color==e.color){scroreCount>0&&(scroreCount-=5,score.innerHTML=scroreCount);for(let t=0;t<=1;t++)textStatus.push(new Status(e.x,e.y,"-5","white",{x:1,y:-1})),textStatus.push(new Status(e.x,e.y,"Immune",e.color,{x:-1,y:-1}));for(let t=0;t<2*e.radius;t++)particles.push(new Particle(o.x,o.y,3*Math.random(),e.color,{x:(Math.random()-.5)*(6*Math.random()),y:(Math.random()-.5)*(6*Math.random())}));gsap.to(e,{radius:e.radius+5}),setTimeout(function(){bullet.splice(s,1)},0)}else{for(let t=0;t<2*e.radius;t++)particles.push(new Particle(o.x,o.y,3*Math.random(),e.color,{x:(Math.random()-.5)*(6*Math.random()),y:(Math.random()-.5)*(6*Math.random())}));if(e.radius-20>8){switch(o.color){case pyroColor:switch(e.color){case cryoColor:for(let t=0;t<=1;t++)textStatus.push(new Status(e.x,e.y,"-20",e.color,{x:1,y:-1})),textStatus.push(new Status(e.x,e.y,"Melt",e.color,{x:-1,y:-1}));gsap.to(e,{radius:e.radius-20}),checkBonus=!0;break;case dendroColor:for(let t=0;t<=1;t++)textStatus.push(new Status(e.x,e.y,"-20",e.color,{x:1,y:-1})),textStatus.push(new Status(e.x,e.y,"Burnt",e.color,{x:-1,y:-1}));gsap.to(e,{radius:e.radius-20}),checkBonus=!0;break;case electroColor:case anemoColor:case geoColor:for(let t=0;t<=1;t++)textStatus.push(new Status(e.x,e.y,"-10",e.color,{x:1,y:-1}));gsap.to(e,{radius:e.radius-10}),checkBonus=!1;break;case hydroColor:for(let t=0;t<=1;t++)textStatus.push(new Status(e.x,e.y,"-5",e.color,{x:1,y:-1}));gsap.to(e,{radius:e.radius-5}),checkBonus=!1}break;case hydroColor:switch(e.color){case pyroColor:for(let t=0;t<=1;t++)textStatus.push(new Status(e.x,e.y,"-20",e.color,{x:1,y:-1})),textStatus.push(new Status(e.x,e.y,"Vaporize",e.color,{x:-1,y:-1}));gsap.to(e,{radius:e.radius-20}),checkBonus=!0;break;case geoColor:for(let t=0;t<=1;t++)textStatus.push(new Status(e.x,e.y,"-20",e.color,{x:1,y:-1})),textStatus.push(new Status(e.x,e.y,"Worn out",e.color,{x:-1,y:-1}));gsap.to(e,{radius:e.radius-20}),checkBonus=!0;break;case dendroColor:for(let t=0;t<=1;t++)textStatus.push(new Status(e.x,e.y,"-5",e.color,{x:1,y:-1}));gsap.to(e,{radius:e.radius-5}),checkBonus=!1;break;case electroColor:case anemoColor:for(let t=0;t<=1;t++)textStatus.push(new Status(e.x,e.y,"-10",e.color,{x:1,y:-1}));gsap.to(e,{radius:e.radius-10}),checkBonus=!1;break;case cryoColor:for(let t=0;t<=1;t++)textStatus.push(new Status(e.x,e.y,"-5",e.color,{x:1,y:-1}));gsap.to(e,{radius:e.radius-5}),checkBonus=!1}break;case anemoColor:switch(e.color){case pyroColor:for(let t=0;t<=1;t++)textStatus.push(new Status(e.x,e.y,"-20",e.color,{x:1,y:-1})),textStatus.push(new Status(e.x,e.y,"Extinguish",e.color,{x:-1,y:-1}));gsap.to(e,{radius:e.radius-20}),checkBonus=!0;break;case dendroColor:for(let t=0;t<=1;t++)textStatus.push(new Status(e.x,e.y,"-20",e.color,{x:1,y:-1})),textStatus.push(new Status(e.x,e.y,"Torn",e.color,{x:-1,y:-1}));gsap.to(e,{radius:e.radius-20}),checkBonus=!0;break;case cryoColor:case electroColor:case hydroColor:for(let t=0;t<=1;t++)textStatus.push(new Status(e.x,e.y,"-10",e.color,{x:1,y:-1}));gsap.to(e,{radius:e.radius-10}),checkBonus=!1;break;case geoColor:for(let t=0;t<=1;t++)textStatus.push(new Status(e.x,e.y,"-5",e.color,{x:1,y:-1}));gsap.to(e,{radius:e.radius-5}),checkBonus=!1}break;case electroColor:switch(e.color){case pyroColor:for(let t=0;t<=1;t++)textStatus.push(new Status(e.x,e.y,"-20",e.color,{x:1,y:-1})),textStatus.push(new Status(e.x,e.y,"Overloaded",e.color,{x:-1,y:-1}));gsap.to(e,{radius:e.radius-20}),checkBonus=!0;break;case hydroColor:for(let t=0;t<=1;t++)textStatus.push(new Status(e.x,e.y,"-20",e.color,{x:1,y:-1})),textStatus.push(new Status(e.x,e.y,"Electrocute",e.color,{x:-1,y:-1}));gsap.to(e,{radius:e.radius-20}),checkBonus=!0;break;case cryoColor:case anemoColor:for(let t=0;t<=1;t++)textStatus.push(new Status(e.x,e.y,"-10",e.color,{x:1,y:-1}));gsap.to(e,{radius:e.radius-10}),checkBonus=!1;break;case dendroColor:case geoColor:for(let t=0;t<=1;t++)textStatus.push(new Status(e.x,e.y,"-5",e.color,{x:1,y:-1}));gsap.to(e,{radius:e.radius-5}),checkBonus=!1}break;case dendroColor:switch(e.color){case electroColor:for(let t=0;t<=1;t++)textStatus.push(new Status(e.x,e.y,"-20",e.color,{x:1,y:-1})),textStatus.push(new Status(e.x,e.y,"Overgrow",e.color,{x:-1,y:-1}));gsap.to(e,{radius:e.radius-20}),checkBonus=!0;break;case geoColor:for(let t=0;t<=1;t++)textStatus.push(new Status(e.x,e.y,"-20",e.color,{x:1,y:-1})),textStatus.push(new Status(e.x,e.y,"Rocksplit",e.color,{x:-1,y:-1}));gsap.to(e,{radius:e.radius-20}),checkBonus=!0;break;case cryoColor:for(let t=0;t<=1;t++)textStatus.push(new Status(e.x,e.y,"-10",e.color,{x:1,y:-1}));gsap.to(e,{radius:e.radius-10}),checkBonus=!1;break;case anemoColor:for(let t=0;t<=1;t++)textStatus.push(new Status(e.x,e.y,"-10",e.color,{x:1,y:-1})),textStatus.push(new Status(e.x,e.y,"Extinguish",e.color,{x:-1,y:-1}));gsap.to(e,{radius:e.radius-10}),checkBonus=!1;break;case hydroColor:case pyroColor:for(let t=0;t<=1;t++)textStatus.push(new Status(e.x,e.y,"-5",e.color,{x:1,y:-1}));gsap.to(e,{radius:e.radius-5}),checkBonus=!1}break;case cryoColor:switch(e.color){case pyroColor:for(let t=0;t<=1;t++)textStatus.push(new Status(e.x,e.y,"-20",e.color,{x:1,y:-1})),textStatus.push(new Status(e.x,e.y,"Melt",e.color,{x:-1,y:-1}));gsap.to(e,{radius:e.radius-20}),checkBonus=!0;break;case hydroColor:for(let t=0;t<=1;t++)textStatus.push(new Status(e.x,e.y,"-20",e.color,{x:1,y:-1})),textStatus.push(new Status(e.x,e.y,"Frozen",e.color,{x:-1,y:-1}));gsap.to(e,{radius:e.radius-20}),checkBonus=!0;break;case dendroColor:for(let t=0;t<=1;t++)textStatus.push(new Status(e.x,e.y,"-5",e.color,{x:1,y:-1}));gsap.to(e,{radius:e.radius-5}),checkBonus=!1;break;case electroColor:case anemoColor:case geoColor:for(let t=0;t<=1;t++)textStatus.push(new Status(e.x,e.y,"-10",e.color,{x:1,y:-1}));gsap.to(e,{radius:e.radius-10}),checkBonus=!1}break;case geoColor:switch(e.color){case electroColor:case anemoColor:for(let t=0;t<=1;t++)textStatus.push(new Status(e.x,e.y,"-20",e.color,{x:1,y:-1})),textStatus.push(new Status(e.x,e.y,"Immune",e.color,{x:-1,y:-1}));gsap.to(e,{radius:e.radius-20}),checkBonus=!0;break;case cryoColor:case pyroColor:for(let t=0;t<=1;t++)textStatus.push(new Status(e.x,e.y,"-10",e.color,{x:1,y:-1}));gsap.to(e,{radius:e.radius-10}),checkBonus=!1;break;case dendroColor:case hydroColor:for(let t=0;t<=1;t++)textStatus.push(new Status(e.x,e.y,"-5",e.color,{x:1,y:-1}));gsap.to(e,{radius:e.radius-5}),checkBonus=!1}}setTimeout(function(){bullet.splice(s,1)},0)}else{if(1==checkBonus){scroreCount+=20,score.innerHTML=scroreCount;for(let t=0;t<=1;t++)textStatus.push(new Status(e.x,e.y,"+20","white",{x:1,y:-1})),textStatus.push(new Status(e.x,e.y,"Bonus","white",{x:-1,y:-1}))}else{scroreCount+=10,score.innerHTML=scroreCount;for(let t=0;t<=1;t++)textStatus.push(new Status(e.x,e.y,"+10","white",{x:1,y:-1}))}setTimeout(function(){enemies.splice(t,1),bullet.splice(s,1)},0)}}})}),showMessage(.25)}const pyro=document.querySelector("#pyro");pyro.addEventListener("click",function(){colorBullet=pyroColor,player.color=pyroColor});const hydro=document.querySelector("#hydro");hydro.addEventListener("click",function(){colorBullet=hydroColor,player.color=hydroColor});const anemo=document.querySelector("#anemo");anemo.addEventListener("click",function(){colorBullet=anemoColor,player.color=anemoColor});const electro=document.querySelector("#electro");electro.addEventListener("click",function(){colorBullet=electroColor,player.color=electroColor});const dendro=document.querySelector("#dendro");dendro.addEventListener("click",function(){colorBullet=dendroColor,player.color=dendroColor});const cryo=document.querySelector("#cryo");cryo.addEventListener("click",function(){colorBullet=cryoColor,player.color=cryoColor});const geo=document.querySelector("#geo");geo.addEventListener("click",function(){colorBullet=geoColor,player.color=geoColor});const elemental=document.querySelectorAll(".elem");function showMessage(e){spd==e?0==checkState&&(modelMess.style.display="block",changeMess2.innerHTML="speed up!",checkState=!0,setTimeout(()=>{modelMess.style.display="none"},2e3)):.5==spd?1==checkState&&(modelMess.style.display="block",changeMess2.innerHTML="bigger!",checkState=!1,setTimeout(()=>{modelMess.style.display="none"},2e3)):1==spd?0==checkState&&(modelMess.style.display="block",changeMess2.innerHTML="speed up!",checkState=!0,setTimeout(()=>{modelMess.style.display="none"},2e3)):1.5==spd&&1==checkState&&(modelMess.style.display="block",changeMess2.innerHTML="speed up!",checkState=!1,setTimeout(()=>{modelMess.style.display="none"},2e3))}function checkHighScore(){scroreCount>localStorage.getItem("game1stHighScore")&&(localStorage.setItem("game1stHighScore",scroreCount),highScore=scroreCount,highScoreBoard.textContent="HIGH SCORE: "+highScore)}elemental.forEach(function(e){e.addEventListener("click",function(){modelElement.querySelector(".chosen").classList.remove("chosen"),e.classList.add("chosen")})}),addEventListener("click",e=>{const t=Math.atan2(e.clientY-h,e.clientX-w),o={x:20*Math.cos(t),y:20*Math.sin(t)};bullet.push(new Projectile(w,h,5,colorBullet,o))}),startGame.addEventListener("click",function(){init(),animate(0),spawnEnemiesInterval=setInterval(spawnEnimies,2e3),modelG.style.display="none",modelElement.style.display="flex",pause.style.display="block",scoreCorner.style.display="block",startBackground.style.display="none",timerCorner.style.display="block",pauseBackground.style.display="none",checkEndGame=!1,timerInterval=setInterval(countTime,1e3),howToPlay.style.display="none",about.style.display="none",endGameBackground.style.display="none",Bg_music.play(),Bg_music.volume=.2}),pause.addEventListener("click",function(){clearInterval(spawnEnemiesInterval),clearInterval(spawnEnemiesInterval_2),cancelAnimationFrame(animationId),modelPause.style.display="flex",pauseScore.innerHTML="score: "+scroreCount,pauseBackground.style.display="block",clearInterval(timerInterval),checkPause=!0}),restartGame.addEventListener("click",function(){init()}),continueGame.addEventListener("click",function(){animate(0),spawnEnemiesInterval=setInterval(spawnEnimies,2e3),modelPause.style.display="none",pause.style.display="block",pauseBackground.style.display="none",timerInterval=setInterval(countTime,1e3),checkPause=!1}),addEventListener("keydown",function(e){switch(e.key){case"Escape":0==checkEndGame&&"none"===modelG.style.display&&(clearInterval(spawnEnemiesInterval),clearInterval(spawnEnemiesInterval_2),cancelAnimationFrame(animationId),modelPause.style.display="flex",pauseScore.innerHTML="Points: "+scroreCount,pauseBackground.style.display="block",clearInterval(timerInterval),checkPause=!0);break;case"q":0==checkPause&&"none"===modelG.style.display&&(colorBullet=pyroColor,player.color=pyroColor,modelElement.querySelector(".chosen").classList.remove("chosen"),pyro.classList.add("chosen"));break;case"w":0==checkPause&&"none"===modelG.style.display&&(colorBullet=hydroColor,player.color=hydroColor,modelElement.querySelector(".chosen").classList.remove("chosen"),hydro.classList.add("chosen"));break;case"e":0==checkPause&&"none"===modelG.style.display&&(colorBullet=anemoColor,player.color=anemoColor,modelElement.querySelector(".chosen").classList.remove("chosen"),anemo.classList.add("chosen"));break;case"r":0==checkPause&&"none"===modelG.style.display&&(colorBullet=electroColor,player.color=electroColor,modelElement.querySelector(".chosen").classList.remove("chosen"),electro.classList.add("chosen"));break;case"1":0==checkPause&&"none"===modelG.style.display&&(colorBullet=dendroColor,player.color=dendroColor,modelElement.querySelector(".chosen").classList.remove("chosen"),dendro.classList.add("chosen"));break;case"2":0==checkPause&&"none"===modelG.style.display&&(colorBullet=cryoColor,player.color=cryoColor,modelElement.querySelector(".chosen").classList.remove("chosen"),cryo.classList.add("chosen"));break;case"3":0==checkPause&&"none"===modelG.style.display&&(colorBullet=geoColor,player.color=geoColor,modelElement.querySelector(".chosen").classList.remove("chosen"),geo.classList.add("chosen"))}}),addEventListener("visibilitychange",function(){"hidden"===document.visibilityState&&"none"===modelG.style.display&&0==checkEndGame&&(clearInterval(spawnEnemiesInterval),cancelAnimationFrame(animationId),modelPause.style.display="flex",pauseScore.innerHTML="score: "+scroreCount,pauseBackground.style.display="block",clearInterval(timerInterval),checkPause=!0)});